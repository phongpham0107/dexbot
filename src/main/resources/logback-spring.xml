<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<include resource="org/springframework/boot/logging/logback/base.xml" />

	<!--Configure for LOCAL profile -->
	<springProfile name="local">

		<!--Configuration log for application -->
		<appender name="LOG-APP" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>logs/application.log</file>
			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>logs/application.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log at ERROR level -->
		<appender name="LOG-ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>logs/error.log</file>
			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>logs/error.log.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<filter class="ch.qos.logback.classic.filter.LevelFilter">
				<level>ERROR</level>
				<onMatch>ACCEPT</onMatch>
				<onMismatch>DENY</onMismatch>
			</filter>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log for track user access the screens -->
		<appender name="LOG-TRACKING" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>logs/tracking.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>logs/tracking.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--LOG everything at INFO level -->
		<root level="INFO">
			<appender-ref ref="LOG-APP" />
			<appender-ref ref="LOG-ERROR" /> <!--Configure for ERROR level -->
		</root>

		<logger name="com.batdongsan" level="INFO" additivity="false">
			<appender-ref ref="CONSOLE" />
			<appender-ref ref="LOG-TRACKING" />
		</logger>
	</springProfile>
	<!--END: Configure for LOCAL profile -->
	
	<!--Configure for DEV profile -->
	<springProfile name="dev">

		<!--Configuration log for application -->
		<appender name="LOG-APP" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>logs/application.log</file>
			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>logs/application.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log at ERROR level -->
		<appender name="LOG-ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>logs/error.log</file>
			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>logs/error.log.%d{yyyy-MM-dd}.%i.log</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<filter class="ch.qos.logback.classic.filter.LevelFilter">
				<level>ERROR</level>
				<onMatch>ACCEPT</onMatch>
				<onMismatch>DENY</onMismatch>
			</filter>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log for track user access the screens -->
		<appender name="LOG-TRACKING" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>logs/tracking.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>logs/tracking.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--LOG everything at INFO level -->
		<root level="INFO">
			<appender-ref ref="LOG-APP" />
			<appender-ref ref="LOG-ERROR" /> <!--Configure for ERROR level -->
		</root>

		<logger name="com.batdongsan" level="INFO" additivity="false">
			<appender-ref ref="CONSOLE" />
			<appender-ref ref="LOG-TRACKING" />
		</logger>
	</springProfile>
	<!--END: Configure for DEV profile -->

	<!--Configure for STAGING profile -->
	<springProfile name="staging">

		<!--Configuration log for application -->
		<appender name="LOG-APP" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>${catalina.base}/logs/application.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>${catalina.base}/logs/application.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log at ERROR level -->
		<appender name="LOG-ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>${catalina.base}/logs/error.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>${catalina.base}/logs/error.log.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<filter class="ch.qos.logback.classic.filter.LevelFilter">
				<level>ERROR</level>
				<onMatch>ACCEPT</onMatch>
				<onMismatch>DENY</onMismatch>
			</filter>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log for track user access the screens -->
		<appender name="LOG-TRACKING" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>${catalina.base}/logs/tracking.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>${catalina.base}/logs/tracking.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--LOG everything at INFO level -->
		<root level="INFO">
			<appender-ref ref="LOG-APP" />
			<appender-ref ref="LOG-ERROR" /> <!--Configure for ERROR level -->
		</root>

		<logger name="com.batdongsan" level="INFO" additivity="false">
			<appender-ref ref="CONSOLE" />
			<appender-ref ref="LOG-TRACKING" />
		</logger>

	</springProfile>
	<!--END: Configure for STAGING profile -->

	<!--Configure for PROD profile -->
	<springProfile name="prod">

		<!--Configuration log for application -->
		<appender name="LOG-APP" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>${catalina.base}/logs/application.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>${catalina.base}/logs/application.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log at ERROR level -->
		<appender name="LOG-ERROR" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>${catalina.base}/logs/error.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>${catalina.base}/logs/error.log.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<filter class="ch.qos.logback.classic.filter.LevelFilter">
				<level>ERROR</level>
				<onMatch>ACCEPT</onMatch>
				<onMismatch>DENY</onMismatch>
			</filter>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--Configuration log for track user access the screens -->
		<appender name="LOG-TRACKING" class="ch.qos.logback.core.rolling.RollingFileAppender">
			<file>${catalina.base}/logs/tracking.log</file>

			<rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">
				<fileNamePattern>${catalina.base}/logs/tracking.%d{yyyy-MM-dd}.%i.log
				</fileNamePattern>
				<maxFileSize>50MB</maxFileSize>
				<!--<maxHistory>60</maxHistory> -->
				<totalSizeCap>1GB</totalSizeCap>
			</rollingPolicy>

			<encoder>
				<pattern>%-22d{dd/MMM/yyyy HH:mm:ss} %-8p %c [%t] - %m \(%F:%L\) %n</pattern>
			</encoder>
		</appender>

		<!--LOG everything at INFO level -->
		<root level="INFO">
			<appender-ref ref="LOG-APP" />
			<appender-ref ref="LOG-ERROR" /> <!--Configure for ERROR level -->
		</root>

		<logger name="com.batdongsan" level="INFO" additivity="false">
			<appender-ref ref="CONSOLE" />
			<appender-ref ref="LOG-TRACKING" />
		</logger>
	</springProfile>
	<!--END: Configure for PROD profile -->
</configuration>